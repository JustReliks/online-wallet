<div class="w-add-account">
  <button color="primary" mat-raised-button class='btn custom-btn custom-btn-blue-gradient'
          (click)="createAccount()">
    <mat-icon style="top: -2px;position: relative; left: -4px">add_circle</mat-icon>
    Создать счёт
  </button>
</div>
<div class="col">
  <div class="alert alert-success" role="alert">
    <h4 class="alert-heading">Информация</h4>
    <p>В этом разделе вы можете создавать, удалять и редактировать ваши счета.</p>
    <hr>
    <p class="mb-0">©Online-wallet</p>
  </div>
  <div>
    <div *ngFor="let account of this.accounts" class="mat-card w-account-card d-flex mb-4">
      <div class="col-2 align-self-center">
        <div class="w-avatar ">
          <img [src]="getTypeIcon(account.accountType.type)" style="width: 100%;height: 100%">
        </div>
      </div>
      <div class="col">
        <div class="w-account-name mb-2">
          {{account.name}} <span style="opacity: .6">[{{account.accountType.type.name}} счёт]</span>
        </div>
        <div class="w-account-description">
          {{account.description}}
        </div>
        <div class="row">
          <div *ngIf="account.goal != null" class="w-point mt-4 mb-4 col" style="width: 100%;">
            <div class="row">
              <p class="col m-0">Цель: <span
                class="font-weight-bold">{{account.convertedBalance.balance + '/' + account.goal.value + ' ' + account.convertedBalance.currency}}
            </span>
              </p>
              <div class="col m-0">
                <p *ngIf="account.goal.value <= account.convertedBalance.balance" style="color: green">Цель
                  выполнена!</p>
                <p *ngIf="isGoalExpired(account)" style="color: red">Вы не успели выполнить цель!</p>
                <p *ngIf="account.goal.value > account.convertedBalance.balance && !isGoalExpired(account)"> Выполнить
                  до: {{account.goal.date | date: 'medium'}}</p>
              </div>
            </div>
            <angular-gradient-progressbar [type]="2" lowTextColor="red"
                                          [secondValue]="getGoalProgressBarValue(account)"></angular-gradient-progressbar>

            <!--            <span class="font-weight-bold" style="color:green"-->
            <!--                  *ngIf="account.convertedBalance.balance > account.goal.value"> - Цель выполнена!</span> <span-->
            <!--            *ngIf="isGoalExpired(account)" style="color: red"-->
            <!--            class="font-weight-bold"> - Вы не успели выполнить цель!</span>-->

          </div>
        </div>
        <div class="w-account-body ">
          <div class="col-2"></div>
          <div class="col-5">
            <div *ngFor="let bill of account.accountBills"
                 class="badge badge-pill badge-primary w-money mr-3">{{bill.balance}} <span
              class="w-currency">{{bill.currency.shortName}}</span></div>
          </div>
          <div class="col w-date-create justify-items-right">
            Создан: {{account.createdAt | date:'medium'}}<br>
            Последняя транзакция: {{account.lastTransaction | date:'medium'}}
          </div>
        </div>
      </div>
      <div class="col-1" style="max-width: 48px">
        <button class="w-settings" #tooltip="matTooltip" matTooltip="Настройки" [matTooltipPosition]="'above'"
                (click)="openSettings(account)">
          <mat-icon>settings</mat-icon>
        </button>
      </div>
    </div>
  </div>
</div>
